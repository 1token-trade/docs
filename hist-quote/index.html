
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>历史行情</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-06c7d637.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;json&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="fixed-header">
      <img src="images/logo_header-25c985bb.png" class="header-logo" alt="Logo header" />
      <div class="nav-box">
        <span class="item">
          <a href="https://1token-trade.github.io/docs/guide/">1Token使用指南</a>
        </span>
        <span class="item active">
          <a href="https://1token-trade.github.io/docs/hist-quote/">历史数据</a>
        </span>
        <span class="item">
          <a href="https://1token.trade/swagger" target="_blank">API浏览器</a>
        </span>
      </div>
    </div>
    <div class="toc-wrapper">
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#8e47fdfb6e" class="toc-h1 toc-link" data-title="获取历史行情">获取历史行情</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#b6edf34dba" class="toc-h2 toc-link" data-title="教程">教程</a>
                  </li>
                  <li>
                    <a href="#ac90b44261" class="toc-h2 toc-link" data-title="限制">限制</a>
                  </li>
                  <li>
                    <a href="#944257fc0d" class="toc-h2 toc-link" data-title="时间戳">时间戳</a>
                  </li>
                  <li>
                    <a href="#3280102eb6" class="toc-h2 toc-link" data-title="获取支持的合约列表">获取支持的合约列表</a>
                  </li>
                  <li>
                    <a href="#tick" class="toc-h2 toc-link" data-title="历史Tick数据">历史Tick数据</a>
                  </li>
                  <li>
                    <a href="#candle" class="toc-h2 toc-link" data-title="历史Candle数据">历史Candle数据</a>
                  </li>
                  <li>
                    <a href="#zhubi" class="toc-h2 toc-link" data-title="历史Zhubi数据">历史Zhubi数据</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#4674be7310" class="toc-h1 toc-link" data-title="数据质量">数据质量</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#19a9bea2d1" class="toc-h2 toc-link" data-title="数据信息">数据信息</a>
                  </li>
                  <li>
                    <a href="#bb90ab6944" class="toc-h2 toc-link" data-title="维护信息">维护信息</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="实盘交易API文档">实盘交易API文档</a>
          </li>
          <li>
            <a href="#278fa9d974" class="toc-h1 toc-link" data-title="变量命名规则与介绍">变量命名规则与介绍</a>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='8e47fdfb6e'>获取历史行情</h1><h2 id='b6edf34dba'>教程</h2>
<p><b>请求地址</b>：<code>https://hist-quote.1tokentrade.cn</code></p>

<aside class="notice">
可以先查看<a href='https://1token-trade.github.io/docs/guide/#word-explanation' target="_blank">名词解释</a>和<a href='https://1token-trade.github.io/docs/guide/#data-structure'>数据结构</a>两个小节了解字段含义。
</aside>

<p><b>请求方式</b></p>

<ul>
<li>请求历史数据需要提供OT-Key，OT-Key申请方式如下：

<ul>
<li>注册成为1Token用户；<br></li>
<li>在<a href='https://1token.trade/account/apis' target="_blank">用户中心</a>申请OT-Key；</li>
</ul></li>
<li>请求历史数据时携带名称为ot-key的请求头，例如申请的API-Key为aaaa-bbbb-cccc-dddd，则请求时需要带上ot-key: aaaa-bbbb-cccc-dddd，否则会报错；</li>
<li>系统会根据key及使用次数进行计费，请参考<a href='https://1token.trade/dataservice'>具体的计费标准</a>；</li>
<li>返回数据时在HTTP Header中会携带当次请求扣减次数及剩余次数：</li>
<li>使用Demo <a href='https://github.com/1token-trade/onetoken/blob/master/demo-python-sync/get_historical_quote.py' target="_blank">get_historical_quote.py</a> 下载数据</li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>ot-quota-consumption</td>
<td>当次请求扣减次数</td>
</tr>
<tr>
<td>ot-quota-remaining</td>
<td>剩余次数剩余次数</td>
</tr>
</tbody></table>

<p><b>数据获取流程</b></p>

<ul>
<li>通用规则

<ul>
<li>交易所信息可以参考：<a href='https://1token-trade.github.io/docs/guide/#exchange-overview'>支持的交易所</a>；</li>
<li>交易对命名规则可以参考：<a href='https://1token-trade.github.io/docs/guide/#naming-rules'>变量命名规则</a>；</li>
</ul></li>
<li>Tick(盘口+最新成交)数据

<ul>
<li>从api 获取某一天的所有交易对的列表，比如<a href='https://hist-quote.1tokentrade.cn/ticks/contracts?date=2020-04-12'>2020年4月12日的所有交易对列表</a>；</li>
<li>选好想要下载的交易对，比如okex/btc.usdt；</li>
<li>选择需要完整亦或是简单快照数据，具体区别请参考历史tick小节；</li>
<li>使用 <code>/ticks</code> 接口下载特定日期指定交易对的数据；</li>
</ul></li>
<li>Trade(逐笔成交)数据<br>

<ul>
<li>从api 获取某一天的所有交易对的列表，比如<a href='https://hist-quote.1tokentrade.cn/trades/contracts?date=2020-04-12'>2020年4月12日的所有交易对列表</a>；</li>
<li>选好想要下载的交易对，比如okex/btc.usdt；</li>
<li>使用 <code>/trades</code> 接口下载特定日期指定交易对的数据；</li>
</ul></li>
<li>Candle(K线)数据<br>

<ul>
<li>选好想要下载的交易对，比如okex/btc.usdt以及okef/btc.usd.q；</li>
<li>可通过<code>/candles/since</code> 接口获得交易对数据的起始时间戳；</li>
<li>可通过<code>/candles</code> 接口获得数据，可以指定时间区间、指定交易对以及周期；</li>
<li>一次最多返回15000根K线, 超过这个数量会返回 <code>400 {&quot;code&quot;: &quot;time-range-too-large&quot;, &quot;message&quot;: &quot;max candle size 15000&quot;}</code></li>
</ul></li>
</ul>
<h2 id='ac90b44261'>限制</h2>
<aside class="warning">接口限制为1秒10个请求，超过这个数量会返回HTTP 429错误。</aside>
<h2 id='944257fc0d'>时间戳</h2>
<p>历史数据内包含相关的交易所时间，时间格式采用UNIX时间戳以及ISO Format格式，示例如下：</p>

<ul>
<li>1595395700</li>
<li>2020-07-22T05:28:20.000000Z</li>
<li>2020-07-22T05:28:20.000000+00:00</li>
<li>2020-07-22T13:28:20.000000+08:00</li>
</ul>

<p>以上四个数值均代表了北京时间2020年7月22日下午13点28分20秒。</p>
<h2 id='3280102eb6'>获取支持的合约列表</h2>
<p><code>GET /[ticks|trades]/contracts?date={date} </code></p>

<ul>
<li>不需要ot-key；</li>
<li>请求中params含义如下：<code>date</code> 是指需要获取数据的日期，格式为<code>YYYY-MM-DD</code>；</li>
<li>返回值为当前有数据的交易对列表</li>
</ul>

<p><code>
[
  &quot;bigone/1st.btc&quot;,
  &quot;bittrex/1st.btc&quot;,
  &quot;hitbtc/1st.btc&quot;,
  ...
]
</code></p>

<p><b>示例</b></p>

<ul>
<li><a href='https://hist-quote.1tokentrade.cn/ticks/contracts?date=2018-02-02'>https://hist-quote.1tokentrade.cn/ticks/contracts?date=2018-02-02</a></li>
<li><a href='https://hist-quote.1tokentrade.cn/trades/contracts?date=2018-02-02'>https://hist-quote.1tokentrade.cn/trades/contracts?date=2018-02-02</a></li>
</ul>
<h2 id='tick'>历史Tick数据</h2>
<p><code>GET /ticks/[simple|full]?date={date}&amp;contract={contract}</code></p>

<blockquote>
<p>Simple Tick 的返回例子</p>
</blockquote>
<pre class="highlight plaintext"><code>time,timestamp,last,volume,ask_0_p,ask_0_v,bid_0_p,bid_0_v
2019-12-12T00:00:00.391395Z,1576108800391,0.01797,0.0,0.01797,13.1327,0.01796,461.8358
2019-12-12T00:00:00.899143Z,1576108800899,0.01797,0.0,0.01797,13.1327,0.01796,461.8358
2019-12-12T00:00:01.508955Z,1576108801508,0.01797,0.0,0.01797,13.1327,0.01796,691.3014
2019-12-12T00:00:02.117091Z,1576108802117,0.01797,0.0,0.01797,13.1327,0.01796,691.3014
2019-12-12T00:00:02.622484Z,1576108802622,0.01797,0.0,0.01797,13.1327,0.01796,691.3014
2019-12-12T00:00:03.229675Z,1576108803229,0.01797,0.0,0.01797,13.1327,0.01796,691.3014
</code></pre>
<blockquote>
<p>Full Tick的返回例子</p>
</blockquote>
<pre class="highlight plaintext"><code>time,last,volume,ask_0_p,ask_0_v,ask_1_p,ask_1_v,ask_2_p,ask_2_v,ask_3_p,ask_3_v,ask_4_p,ask_4_v,ask_5_p,ask_5_v,ask_6_p,ask_6_v,ask_7_p,ask_7_v,ask_8_p,ask_8_v,ask_9_p,ask_9_v,ask_10_p,ask_10_v,ask_11_p,ask_11_v,ask_12_p,ask_12_v,ask_13_p,ask_13_v,ask_14_p,ask_14_v,ask_15_p,ask_15_v,ask_16_p,ask_16_v,ask_17_p,ask_17_v,ask_18_p,ask_18_v,ask_19_p,ask_19_v,bid_0_p,bid_0_v,bid_1_p,bid_1_v,bid_2_p,bid_2_v,bid_3_p,bid_3_v,bid_4_p,bid_4_v,bid_5_p,bid_5_v,bid_6_p,bid_6_v,bid_7_p,bid_7_v,bid_8_p,bid_8_v,bid_9_p,bid_9_v,bid_10_p,bid_10_v,bid_11_p,bid_11_v,bid_12_p,bid_12_v,bid_13_p,bid_13_v,bid_14_p,bid_14_v,bid_15_p,bid_15_v,bid_16_p,bid_16_v,bid_17_p,bid_17_v,bid_18_p,bid_18_v,bid_19_p,bid_19_v,timestamp
2019-12-12T00:00:00.391395Z,0.01797,0.0,0.01797,13.1327,0.01798,442.019,0.01799,5693.3811,0.018,1841.6386,0.01801,11694.8222,0.01802,1731.8819,0.01804,1044.0569,0.01805,82.8451,0.01806,742.1187,0.01807,14960.7769,0.01808,160.0,0.01809,10.0,0.01811,35.4225,0.01812,2.5318,0.01813,11.129,0.01815,31.4108,0.01817,136.0,0.01818,35.7604,0.01819,4570.0256,0.0182,108.4075,0.01796,461.8358,0.01795,5241.1754,0.01794,2159.1227,0.01793,10078.0816,0.01792,1140.0,0.01791,142.1304,0.0179,40.0,0.01789,13.7112,0.01787,266.6471,0.01786,14801.0,0.01785,1.7452,0.01784,49.9182,0.01783,154.7059,0.01782,192.11,0.01781,407.914,0.0178,4712.6926,0.01779,21.0,0.01776,55.0496,0.01773,2.5318,0.01772,49.8779,1576108800391
2019-12-12T00:00:00.899143Z,0.01797,0.0,0.01797,13.1327,0.01798,442.019,0.01799,5842.7715,0.018,1692.2482,0.01801,11694.8222,0.01802,1731.8819,0.01804,1044.0569,0.01805,82.8451,0.01806,742.1187,0.01807,14960.7769,0.01808,160.0,0.01809,10.0,0.01811,35.4225,0.01812,2.5318,0.01813,11.129,0.01815,31.4108,0.01817,136.0,0.01818,35.7604,0.01819,4570.0256,0.0182,108.4075,0.01796,461.8358,0.01795,5241.1754,0.01794,2718.6386,0.01793,10078.0816,0.01792,1639.12,0.01791,142.1304,0.0179,40.0,0.01789,13.7112,0.01787,266.6471,0.01786,14801.0,0.01785,1.7452,0.01784,49.9182,0.01783,154.7059,0.01782,192.11,0.01781,407.914,0.0178,4712.6926,0.01779,21.0,0.01776,55.0496,0.01773,2.5318,0.01772,49.8779,1576108800899
2019-12-12T00:00:01.508955Z,0.01797,0.0,0.01797,13.1327,0.01798,442.019,0.01799,5842.7715,0.018,1692.2482,0.01801,11694.8222,0.01802,1731.8819,0.01804,1044.0569,0.01805,82.8451,0.01806,742.1187,0.01807,14960.7769,0.01808,160.0,0.01809,10.0,0.01811,35.4225,0.01812,2.5318,0.01813,11.129,0.01815,31.4108,0.01817,136.0,0.01818,35.7604,0.01819,4570.0256,0.0182,108.4075,0.01796,691.3014,0.01795,5241.1754,0.01794,2718.6386,0.01793,10078.0816,0.01792,1140.0,0.01791,142.1304,0.0179,40.0,0.01789,13.7112,0.01787,266.6471,0.01786,14801.0,0.01785,1.7452,0.01784,49.9182,0.01783,154.7059,0.01782,192.11,0.01781,407.914,0.0178,4712.6926,0.01779,21.0,0.01776,55.0496,0.01773,2.5318,0.01772,49.8779,1576108801508
2019-12-12T00:00:02.117091Z,0.01797,0.0,0.01797,13.1327,0.01798,442.019,0.01799,5842.7715,0.018,1692.2482,0.01801,11694.8222,0.01802,1731.8819,0.01804,1044.0569,0.01805,82.8451,0.01806,742.1187,0.01807,14960.7769,0.01808,160.0,0.01809,10.0,0.01811,35.4225,0.01812,2.5318,0.01813,11.129,0.01815,31.4108,0.01817,136.0,0.01818,35.7604,0.01819,4570.0256,0.0182,108.4075,0.01796,691.3014,0.01795,5241.1754,0.01794,2718.6386,0.01793,10078.0816,0.01792,1639.1281,0.01791,142.1304,0.0179,40.0,0.01789,13.7112,0.01787,266.6471,0.01786,14801.0,0.01785,1.7452,0.01784,49.9182,0.01783,154.7059,0.01782,192.11,0.01781,407.914,0.0178,4712.6926,0.01779,21.0,0.01776,55.0496,0.01773,2.5318,0.01772,49.8779,1576108802117
2019-12-12T00:00:02.622484Z,0.01797,0.0,0.01797,13.1327,0.01798,442.019,0.01799,5842.7715,0.018,1692.2482,0.01801,11694.8222,0.01802,1731.8819,0.01804,1044.0569,0.01805,82.8451,0.01806,742.1187,0.01807,14960.7769,0.01808,160.0,0.01809,10.0,0.01811,35.4225,0.01812,2.5318,0.01813,11.129,0.01815,31.4108,0.01817,136.0,0.01818,35.7604,0.01819,4570.0256,0.0182,108.4075,0.01796,691.3014,0.01795,5241.1754,0.01794,3278.1545,0.01793,10078.0816,0.01792,1639.1281,0.01791,142.1304,0.0179,40.0,0.01789,13.7112,0.01787,266.6471,0.01786,14801.0,0.01785,1.7452,0.01784,49.9182,0.01783,154.7059,0.01782,192.11,0.01781,407.914,0.0178,4712.6926,0.01779,21.0,0.01776,55.0496,0.01773,2.5318,0.01772,49.8779,1576108802622
2019-12-12T00:00:03.229675Z,0.01797,0.0,0.01797,13.1327,0.01798,162.18,0.01799,5842.7715,0.018,1692.2482,0.01801,11694.8222,0.01802,1731.8819,0.01804,1044.0569,0.01805,82.8451,0.01806,742.1187,0.01807,14960.7769,0.01808,160.0,0.01809,10.0,0.01811,35.4225,0.01812,2.5318,0.01813,11.129,0.01815,31.4108,0.01817,136.0,0.01818,35.7604,0.01819,4570.0256,0.0182,108.4075,0.01796,691.3014,0.01795,5241.1754,0.01794,2718.6386,0.01793,10078.0816,0.01792,1639.1281,0.01791,142.1304,0.0179,40.0,0.01789,13.7112,0.01787,266.6471,0.01786,14801.0,0.01785,1.7452,0.01784,49.9182,0.01783,154.7059,0.01782,192.11,0.01781,407.914,0.0178,4712.6926,0.01779,21.0,0.01776,55.0496,0.01773,2.5318,0.01772,49.8779,1576108803229
2019-12-12T00:00:04.240449Z,0.01797,0.0,0.01797,13.1327,0.01798,162.18,0.01799,5842.7715,0.018,1692.2482,0.01801,11694.8222,0.01802,1731.8819,0.01804,1044.0569,0.01805,82.8451,0.01806,742.1187,0.01807,14960.7769,0.01808,160.0,0.01809,10.0,0.01811,35.4225,0.01812,2.5318,0.01813,11.129,0.01815,31.4108,0.01817,136.0,0.01818,35.7604,0.01819,4570.0256,0.0182,108.4075,0.01796,691.3014,0.01795,5241.1754,0.01794,2159.1227,0.01793,10078.0816,0.01792,1140.0,0.01791,142.1304,0.0179,40.0,0.01789,13.7112,0.01787,266.6471,0.01786,14801.0,0.01785,1.7452,0.01784,49.9182,0.01783,154.7059,0.01782,192.11,0.01781,407.914,0.0178,4712.6926,0.01779,21.0,0.01776,55.0496,0.01773,2.5318,0.01772,49.8779,1576108804240
2019-12-12T00:00:04.747591Z,0.01797,0.0,0.01797,13.1327,0.01798,162.18,0.01799,6122.4926,0.018,1692.2482,0.01801,11694.8222,0.01802,1731.8819,0.01804,1044.0569,0.01805,82.8451,0.01806,742.1187,0.01807,14960.7769,0.01808,160.0,0.01809,10.0,0.01811,35.4225,0.01812,2.5318,0.01813,11.129,0.01815,31.4108,0.01817,136.0,0.01818,35.7604,0.01819,4570.0256,0.0182,108.4075,0.01796,691.3014,0.01795,4673.3377,0.01794,2159.1227,0.01793,10637.5975,0.01792,1639.1291,0.01791,142.1304,0.0179,40.0,0.01789,13.7112,0.01787,266.6471,0.01786,14801.0,0.01785,1.7452,0.01784,49.9182,0.01783,154.7059,0.01782,192.11,0.01781,407.914,0.0178,4712.6926,0.01779,21.0,0.01776,55.0496,0.01773,2.5318,0.01772,49.8779,1576108804747
</code></pre>
<ul>
<li>获取tick历史数据，并且格式化后输出；

<ul>
<li>快照0.5s-1s产生一个 不同交易所会有所区别</li>
</ul></li>
<li>请求完整数据访问 <code>/ticks/full</code>；

<ul>
<li>完整数据包含20档盘口数据的快照</li>
</ul></li>
<li>请求简单数据访问 <code>/ticks/simple</code>；

<ul>
<li>仅包含买一卖一档位的简单快照数据</li>
</ul></li>
<li>请求中params含义如下：<br>

<ul>
<li><code>date</code> 需要获取数据的日期，格式为<code>YYYY-MM-DD</code></li>
<li><code>contract</code> 交易对</li>
</ul></li>
<li>输出格式默认为gzip；</li>
<li>数据格式默认为csv；</li>
<li>交易所时间格式与UNIX时间戳一致，包含时区信息，若无时区则默认为UTC时区；</li>
<li>返回数据的数据列名解释</li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>time</td>
<td>1Token记录这一行tick的时间isoformat (含时区)</td>
</tr>
<tr>
<td>timestamp</td>
<td>time转换成时间戳 (单位是毫秒)</td>
</tr>
<tr>
<td>last</td>
<td>最新成交价</td>
</tr>
<tr>
<td>volume</td>
<td>历史字段 请忽略</td>
</tr>
<tr>
<td>bid_N_p</td>
<td>买N价 N=0 的时候代表买1</td>
</tr>
<tr>
<td>bid_N_v</td>
<td>买N量</td>
</tr>
<tr>
<td>ask_N_p</td>
<td>卖N价</td>
</tr>
<tr>
<td>ask_N_v</td>
<td>卖N量</td>
</tr>
</tbody></table>

<aside class="notice">asks按价格从低到高排序，bids按价格从高到低排序，大部分交易对的深度为20档，个别交易所、交易对会有区别。</aside>

<p><b>示例</b></p>

<ul>
<li><a href='https://hist-quote.1tokentrade.cn/ticks/simple?date=2018-01-02&contract=okex/btc.usdt'>https://hist-quote.1tokentrade.cn/ticks/simple?date=2018-01-02&amp;contract=okex/btc.usdt</a></li>
<li><a href='https://hist-quote.1tokentrade.cn/ticks/full?date=2018-01-02&contract=okex/btc.usdt'>https://hist-quote.1tokentrade.cn/ticks/full?date=2018-01-02&amp;contract=okex/btc.usdt</a></li>
</ul>
<h2 id='candle'>历史Candle数据</h2>
<p><code>GET /candles?contract={contract}&amp;since={since}&amp;until={until}&amp;duration={duration}&amp;format=[json|csv]</code></p>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight plaintext"><code>[
  {
    "timestamp": 1531180800,
    "open": 6667,
    "high": 6667,
    "low": 6657,
    "close": 6657.8,
    "volume": 49.26128019
  },
  ...
]
</code></pre>
<ul>
<li>获取candle历史数据，并且格式化后输出；</li>
<li>请求中params含义如下：</li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>since</td>
<td>candle的开始时间，格式为isoformat时间戳或偏移量的形式（如now-1d表示1天以前的时间点），默认为一天前。</td>
</tr>
<tr>
<td>until</td>
<td>candle的结束时间，格式同since，默认为当前时间。</td>
</tr>
<tr>
<td>contract</td>
<td>交易对。</td>
</tr>
<tr>
<td>duration</td>
<td>candle的周期，支持1m/5m/15m/30m/1h。</td>
</tr>
<tr>
<td>format</td>
<td>输出格式，可选项：json、csv。不填默认为json。</td>
</tr>
</tbody></table>

<ul>
<li>返回数据字段含义：</li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>contract</td>
<td>交易对</td>
</tr>
<tr>
<td>timestamp</td>
<td>时间戳</td>
</tr>
<tr>
<td>volume</td>
<td>成交量</td>
</tr>
<tr>
<td>open</td>
<td>开盘价</td>
</tr>
<tr>
<td>close</td>
<td>收盘价</td>
</tr>
<tr>
<td>high</td>
<td>最高价</td>
</tr>
<tr>
<td>low</td>
<td>最低价</td>
</tr>
</tbody></table>

<p><b>示例</b></p>

<ul>
<li><a href='https://hist-quote.1tokentrade.cn/candles?contract=okex/btc.usdt&since=2018-01-02&until=2018-01-03&duration=1m&format=csv'>https://hist-quote.1tokentrade.cn/candles?contract=okex/btc.usdt&amp;since=2018-01-02&amp;until=2018-01-03&amp;duration=1m&amp;format=csv</a></li>
</ul>

<p><b>查询具体交易对数据的起始时间</b></p>

<p><code>GET /candles/since?contract={contract}&amp;duration={duration}</code></p>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight plaintext"><code>{
  "since": 1508990400
}
</code></pre>
<ul>
<li>请求中params含义如下：

<ul>
<li><code>contract</code> 交易对；</li>
<li><code>duration</code> candle的周期，支持1m/5m/15m/30m/1h/1d；</li>
</ul></li>
<li>返回数据字段含义：

<ul>
<li><code>since</code> 最早一根candle的时间戳；</li>
</ul></li>
<li><p>示例:
<a href='https://hist-quote.1tokentrade.cn/candles/since?contract=huobip/btc.usdt&duration=1m'>https://hist-quote.1tokentrade.cn/candles/since?contract=huobip/btc.usdt&amp;duration=1m</a></p></li>
<li><p>历史Candle有一定的延时(数分钟), 如果需要更实时的Candle 请参考 <a target="_blank" href='https://1token.trade/swagger?url=/swagger/quote.yml#/Quote/get_candles'>1Token实时Candle文档</a></p></li>
<li><p>交易所时间格式与UNIX时间戳一致，包含时区信息，若无时区则默认为UTC时区</p></li>
<li><p>okex早期（2018年5月）部分日期存在较多数据缺失，以下csv文件列出了okex早期的一分钟k线每日完整性： <a href='https://hist-quote.1tokentrade.cn/candles/status/okex'>https://hist-quote.1tokentrade.cn/candles/status/okex</a>；</p></li>
</ul>
<h2 id='zhubi'>历史Zhubi数据</h2>
<p><code>GET /trades?date={date}&amp;contract={contract}</code></p>

<aside class="notice">返回contract里面的xtc.*是历史原因遗留，可忽略。</aside>

<blockquote>
<p>Response</p>
</blockquote>
<pre class="highlight plaintext"><code>2018-11-11T00:00:01.481000+00:00,btc.usdt:xtc.huobip,6431.0,b,1.7948,1541894401.481,2018-11-11T00:00:01.790347+00:00,1541894401.790347
2018-11-11T00:00:04.248000+00:00,btc.usdt:xtc.huobip,6430.83,s,0.0459,1541894404.248,2018-11-11T00:00:04.474472+00:00,1541894404.474472
2018-11-11T00:00:04.525000+00:00,btc.usdt:xtc.huobip,6431.0,b,0.5839,1541894404.525,2018-11-11T00:00:04.748372+00:00,1541894404.748372

</code></pre>
<ul>
<li>获取zhubi历史数据，并且格式化后输出；</li>
<li>请求中params含义如下：

<ul>
<li><code>date</code> 需要获取数据的日期，格式为<code>YYYY-MM-DD</code>；</li>
<li><code>contract</code> 交易对；</li>
</ul></li>
<li>输出格式为gzip；</li>
<li>数据格式为csv；</li>
<li>返回数据的数据列含义依次为：</li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>exchange_time</td>
<td>交易所的isoformat时间(utc时间）</td>
</tr>
<tr>
<td>contract</td>
<td>交易对</td>
</tr>
<tr>
<td>price</td>
<td>成交价格</td>
</tr>
<tr>
<td>bs</td>
<td>&#39;b&#39;是买，&#39;s&#39;是卖</td>
</tr>
<tr>
<td>amount</td>
<td>成交量</td>
</tr>
<tr>
<td>exchange_timestamp</td>
<td>exchange_time 转换成时间戳 (单位是秒)</td>
</tr>
<tr>
<td>time</td>
<td>1Token收到这个逐笔时候 机器的isoformat时间</td>
</tr>
<tr>
<td>timestamp</td>
<td>time 转换成时间戳(单位是秒)</td>
</tr>
</tbody></table>

<p><b>示例</b></p>

<ul>
<li><p><a href='https://hist-quote.1tokentrade.cn/trades?date=2018-01-02&contract=okex/btc.usdt'>https://hist-quote.1tokentrade.cn/trades?date=2018-01-02&amp;contract=okex/btc.usdt</a></p></li>
<li><p>数据大部分为实时抓取，可能存在缺失</p></li>
<li><p>部分数据存在冗余(出现重复的逐笔数据)</p></li>
<li><p>交易所时间格式与UNIX时间戳一致，包含时区信息，若无时区则默认为UTC时区</p></li>
</ul>
<h1 id='4674be7310'>数据质量</h1>
<ul>
<li><p>所有的Tick和逐笔数据是从交易所采集的原始数据，1Token未进行任何的加工处理，数据可能因为交易所的错误和1Token的错误出现丢失遗弃和错误。1Token不保证数据的质量和数据的完整性。</p></li>
<li><p>大部分的candle数据是从交易所直接获取的。</p></li>
</ul>
<h2 id='19a9bea2d1'>数据信息</h2>
<ul>
<li>下表列出了部分主要交易所的开设时间，以及可从1Token获取数据的最早日期；</li>
<li>并非所有交易对均能在该起始日期获取到数据，具体请使用根据教程获得指定日期下可用的交易对。</li>
</ul>

<table><thead>
<tr>
<th>交易所</th>
<th>开设时间</th>
<th>Tick</th>
<th>Zhubi</th>
<th>Candle</th>
</tr>
</thead><tbody>
<tr>
<td>币安 (binance)</td>
<td>2017/07/14</td>
<td>2017/08/10</td>
<td>2017/07/14</td>
<td>2017/07/14</td>
</tr>
<tr>
<td>币安期货 (binancef)</td>
<td>2019/09/08</td>
<td>2019/09/18</td>
<td>2019/09/18</td>
<td>2019/09/18</td>
</tr>
<tr>
<td>火币现货 (huobip)</td>
<td>2017/07/28</td>
<td>2017/08/02</td>
<td>2017/09/08</td>
<td>2017/07/28</td>
</tr>
<tr>
<td>火币交割 (huobif)</td>
<td>2018/11/09</td>
<td>2018/11/13</td>
<td>2018/11/13</td>
<td>2018/11/09</td>
</tr>
<tr>
<td>火币永续 (huobiswap)</td>
<td>2020/03/25</td>
<td>2020/04/19</td>
<td>2020/04/19</td>
<td>2020/04/09</td>
</tr>
<tr>
<td>OK现货 (okex)</td>
<td>2017/10/12</td>
<td>2017/10/22</td>
<td>2017/10/31</td>
<td>2017/10/22</td>
</tr>
<tr>
<td>OK交割 (okef)</td>
<td>2014/10</td>
<td>2017/11/13</td>
<td>2017/11/14</td>
<td>2017/11/14</td>
</tr>
<tr>
<td>OK永续 (okswap)</td>
<td>2019/12/18</td>
<td>2019/12/18</td>
<td>2019/12/18</td>
<td>2019/12/18</td>
</tr>
<tr>
<td>BitMEX (bitmex)</td>
<td>2015</td>
<td>2017/06/02</td>
<td>2018/06/06</td>
<td>2017/01/01</td>
</tr>
</tbody></table>
<h2 id='bb90ab6944'>维护信息</h2>
<ul>
<li>数据为实时抓取，有一些已知的缺失，我们有计划逐步恢复缺失的部分数据；</li>
<li>json数据可能某些行是不完整的json格式, 请丢弃那些错误行；</li>
<li>以下为部分已知的数据缺失时间段及原因：

<ul>
<li>2017-12-17至2018-01-19期间每小时最后可能会缺失部分数据；</li>
<li>2018-01-22币安有维护，当日部分时间段无数据；</li>
<li>2018-02-08至2018-02-10期间币安有长时间维护，这段时间无币安数据；</li>
<li>2018-07-03至2018-07-08，及2018-07-14 1token系统升级，有数据缺失；</li>
<li>2018-08-02当天1Token系统维护 没有数据；</li>
<li>2018-10-19 14:00--16:00（UTC+8）,币安有维护；</li>
<li>2019-04-24 15:30--18:00 (UTC+8)，数据来源为第三方数据源，数据有部分缺失；</li>
<li>2020-09-07 18:00--19:30 (UTC+8)，阿里云故障，数据有大规模缺失；</li>
<li>2020-09-07 19:30--24:00 (UTC+8)，阿里云故障，数据有少量缺失。</li>
</ul></li>
</ul>
<h1 id='api'>实盘交易API文档</h1>
<p>对于想对接1Token API进行实盘交易的用户，以下是1Token API的详细swagger文档：</p>

<ul>
<li><a href='https://1token-trade.github.io/docs/guide/#quote-websocket'>quote websocket</a></li>
<li><a href='https://1token.trade/r/swagger?url=/r/swagger/quote.yml'>Swagger Basic API</a></li>
<li><a href='https://1token.trade/r/swagger?url=/r/swagger/quote.yml'>Swagger Quote API</a></li>
<li><a href='https://1token.trade/r/swagger?url=/r/swagger/trade.yml'>Swagger Trade API</a></li>
</ul>
<h1 id='278fa9d974'>变量命名规则与介绍</h1>
<ul>
<li>现货（币币）交易代码由3部分组成，<code>{exchange}/{underlying}.{quote_currency}</code></li>
<li>期货交易代码由4部分组成，<code>{exchange}/{underlying}.{quote_currency}.{delivery}</code>，bitmex交易所没有delivery的合约是该交易所指定交易对的参考指数。</li>
<li>更多内容可以查看<a href="https://1token-trade.github.io/docs/guide#naming-rules">变量命名规则</a>与<a href="https://1token-trade.github.io/docs/guide#exchange-details">交易所详细介绍</a>两个小节进一步了解。</li>
</ul>

<table><thead>
<tr>
<th>交易代码</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>okex/btc.usdt</td>
<td>表示OKEX交易所BTCUSDT币币交易对</td>
</tr>
<tr>
<td>huobip/btc.usdt</td>
<td>表示huobip交易所BTCUSDT币币交易对</td>
</tr>
<tr>
<td>binance/btc.usdt</td>
<td>表示binance交易所BTCUSDT币币交易对</td>
</tr>
<tr>
<td>okef/btc.usd.i</td>
<td>表示OKEX交易所以BTC为保证金的BTC合约的指数 i是index的缩写 指数不能交易 所以指数没有bid ask</td>
</tr>
<tr>
<td>okef/btc.usd.t</td>
<td>表示OKEX交易所以BTC为保证金的BTC当周合约 t是this week的缩写</td>
</tr>
<tr>
<td>okef/btc.usd.n</td>
<td>表示OKEX交易所以BTC为保证金的BTC次周合约 n是next week的缩写</td>
</tr>
<tr>
<td>okef/btc.usd.q</td>
<td>表示OKEX交易所以BTC为保证金的BTC当季合约 q是quarter的缩写</td>
</tr>
<tr>
<td>okef/btc.usd.b</td>
<td>表示OKEX交易所以BTC为保证金的BTC次季合约 b是biquarter的缩写</td>
</tr>
<tr>
<td>okef/btc.usdt.i</td>
<td>表示OKEX交易所以USDT为保证金的BTC合约的指数 i是index的缩写 指数不能交易 所以指数没有bid ask</td>
</tr>
<tr>
<td>okef/btc.usdt.t</td>
<td>表示OKEX交易所以USDT为保证金的BTC当周合约 t是this week的缩写</td>
</tr>
<tr>
<td>okef/btc.usdt.n</td>
<td>表示OKEX交易所以USDT为保证金的BTC次周合约 n是next week的缩写</td>
</tr>
<tr>
<td>okef/btc.usdt.q</td>
<td>表示OKEX交易所以USDT为保证金的BTC当季合约 q是quarter的缩写</td>
</tr>
<tr>
<td>okef/btc.usdt.b</td>
<td>表示OKEx交易所以USDT为保证金的BTC次季合约 b是biquarter的缩写</td>
</tr>
<tr>
<td>okswap/btc.usd.td</td>
<td>表示OKEX交易所BTC的永续合约</td>
</tr>
<tr>
<td>okswap/btc.usdt.td</td>
<td>表示OKEX交易所以USDT为保证金的BTC永续合约</td>
</tr>
<tr>
<td>huobif/btc.usd.i</td>
<td>表示huobi交易所BTC合约的指数 i是index的缩写 指数不能交易 所以指数没有bid ask</td>
</tr>
<tr>
<td>huobif/btc.usd.t</td>
<td>表示huobi交易所BTC当周合约 t是this week的缩写</td>
</tr>
<tr>
<td>huobif/btc.usd.n</td>
<td>表示huobi交易所BTC次周合约 n是next week的缩写</td>
</tr>
<tr>
<td>huobif/btc.usd.q</td>
<td>表示huobi交易所BTC当季合约 q是quarter的缩写</td>
</tr>
<tr>
<td>huobiswap/btc.usd.td</td>
<td>表示huobi交易所BTC的永续合约</td>
</tr>
<tr>
<td>bitmex/eth.btc.2018-06-29</td>
<td>表示bitmex交易所2018年6月29日到期的eth.btc合约</td>
</tr>
<tr>
<td>bitmex/btc.usd.td</td>
<td>表示bitmex交易所btc.usd的掉期合约(永续合约)</td>
</tr>
<tr>
<td>btimex/btc.usd</td>
<td>表示bitmex交易所btc.usd的参考指数 指数不能交易 所以指数没有bid ask</td>
</tr>
<tr>
<td>binancef/btc.usdt.td</td>
<td>表示币安交易所btc.usdt的永续合约</td>
</tr>
<tr>
<td>bitflyer/btc.jpy.td</td>
<td>表示bitflyer交易所fx_btc_jpy的永续合约</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
          </div>
      </div>
    </div>
  </body>
</html>
